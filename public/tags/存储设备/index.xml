<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>存储设备 on 自游鱼</title>
    <link>https://freefish100.github.io/hugoblog-all/tags/%E5%AD%98%E5%82%A8%E8%AE%BE%E5%A4%87/</link>
    <description>Recent content in 存储设备 on 自游鱼</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <lastBuildDate>Thu, 15 Aug 2024 00:00:00 +0000</lastBuildDate>
    <atom:link href="https://freefish100.github.io/hugoblog-all/tags/%E5%AD%98%E5%82%A8%E8%AE%BE%E5%A4%87/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>普安Infortrend GS/GSE 存储的备份服务器功能</title>
      <link>https://freefish100.github.io/hugoblog-all/posts/js20240815b/</link>
      <pubDate>Thu, 15 Aug 2024 00:00:00 +0000</pubDate>
      <guid>https://freefish100.github.io/hugoblog-all/posts/js20240815b/</guid>
      <description>普安Infortrend存储提供内置的“备份服务器”功能，支持Windows和MAC系统，可以把PC电脑端或文件服务器((CIFS/NFS 协议))上的文件资料备份到存储中，并能根据实际需要来自定义备份排程。备份服务器功能是完全免费的，可以减少购买第三方备份软件的相关成本。&#xA;要使用Infortrend存储的备份功能，需要在存储中先启用备份功能。登录存储管理的主界面，进入[设置]-[应用]&#xA;在[存放库]中，点选[备份服务器]，然后安装和启用“备份服务器”功能（注：机器需要有16G或上以的缓存才能安装启用”备份服务器“功能）&#xA;安装并开启备份功能后，现在创建一个备份普通电脑文件资料的备份任务。在”备份服务器“窗口中，备份源选择”个人电脑“，备份存放到的目标“卷”选择现有已经建立好的卷或者点击加号新建一个卷&#xA;到这里，存储端的备份设置就完成了。下面在要备份的源电脑上安装Eonview客户端软件&#xA;防火墙放行Eonview相关服务&#xA;打开刚安装的电脑端EonView备份软件的主界面(后面可以设置中文界面)，点击 [Rescan] 扫描目标端的存储设备&#xA;当搜索到网络中的存储设备后，会自动识别到存储的型号和IP地址&#xA;输入存储端已事先添加好的用户名和密码，登录EonView&#xA;登录后，可以把语言设置为简体中文&#xA;启用EonView电脑端的文件备份功能&#xA;开启EonView客户端的备份功能后，就可以创建一个备份计划&#xA;勾选要备份的文件或文件夹&#xA;根据实际需要选定备份类型和备份频率&#xA;创建好备份计划后，就可以开始进行备份了&#xA;执行备份过程中，可以在备份“历史”上查看备份的状态&#xA;如图所见，备份“历史”列表中有一个已经备份成功的任务和一个正在执行备份的任务&#xA;如果要恢复之前的备份，可以进入备份“历史”中进行恢复的操作。比如现在先把电脑中D盘下的&amp;quot;soft&amp;quot;文件夹删除(刚才上面已经备份了这个文件夹的)&#xA;现在要恢复刚才被删除的&amp;quot;soft&amp;quot;文件夹，在备份“历史”中，勾选相应要恢复&amp;quot;soft&amp;quot;文件夹的已备份的任务名称，点击”恢复“&#xA;然后耐心等待恢复过程，在备份“历史”中查看恢复的状态，恢复完成后，打开原来文件夹的路径，即查看到先前被删除的&amp;quot;soft&amp;quot;已经被恢复回来了&#xA;下面演示“备份服务器”功能中“备份文件服务器”的操作&#xA;比如有一台文件服务器(IP为192.168.1.52)，文件服务器可以是使用服务器搭建的或者其它NAS设备，文件如下图：&#xA;现在要把这台文件服务器上的文件和文件夹备份到Infortrend存储上。进入存储端的”备份服务器“界面，备份源选择”文件服务器“&#xA;点击加号添加这台要备份的源文件服务器，并填写登录文件服务器的相关信息&#xA;其中”协议“这里，一般NAS共享和Windows文件共享服务器，就选“CIFS“，Linux文件共享服务器就选&amp;quot;NFS&amp;quot;。账户和密码，填入访问共享文件夹的账户和密码&#xA;填写好新创建的文件服务器信息后，继续按实际需求填选备份任务的其它信息，然后点击”创建“&#xA;创建好备份计划后，可以在[排程任务]中查看任务列表，任务会按照刚才设定的计划自动执行备份操作，耐心等待备份的完成。也可以在[监控]中查看正在执行的任务。&#xA;如下图，备份已经完成的状态&#xA;如果要恢复”文件服务器“的备份，就切换到”备份服务器“页面中的[恢复]，然后点选要恢复备份的信息&#xA;恢复的“还原目的地“，为方便演示，这里选择了”自定义“（事前在文件服务器中新建了一个共享文件夹&amp;quot;Re_data&amp;quot;，用于存放还原的文件）。在实际环境中，可以选择“原始位置”&#xA;查看”监控“选项卡，可以看到恢复正在进行中，耐心等待恢复过程&#xA;已成功恢复备份的任务状态&#xA;查看备份已成功恢复到文件服务器中的文件</description>
    </item>
    <item>
      <title>群晖SAN Manager给电脑服务器扩容，挂载成本地磁盘</title>
      <link>https://freefish100.github.io/hugoblog-all/posts/js20240815a/</link>
      <pubDate>Thu, 15 Aug 2024 00:00:00 +0000</pubDate>
      <guid>https://freefish100.github.io/hugoblog-all/posts/js20240815a/</guid>
      <description>我们在购买电脑时，对硬件配置很难做到一步到位，随着时间的推移，当时电脑的配置往往难以满足后续的使用要求，特别是硬盘，当资料越来越多时，就会出现硬盘空间不足的情况，无法存储更多的资料了，这时就需要再加装多一块硬盘，以满足当前的存储要求。&#xA;电脑的硬盘空间不足，除了直接在主机中添加硬盘来解决之外，还有一种更加专业和高级的解决方案，就是使用存储区域网络(SAN)。 SAN是一种专门的网络架构，用于将存储设备与普通电脑或服务器连接起来，提供高性能、高可用性的存储解决方案。SAN有很好的灵活性和可扩展性，可以轻松地增加或减少分配电脑服务器的存储空间，无需重新配置主机硬件。SAN存储解决方案一般应用在企业环境，但也适用于家庭环境。如果你公司或家里有一台存储设备，就可以使用SAN来解决电脑或服务器硬盘空间不足的情况。&#xA;说到存储设备，群晖应该是大家听到过次数最多的产品了，下面我们就以群晖DSM7.2系统版本，分享电脑连接SAN存储的过程。&#xA;在开始前，我们先了解一下几个有关于存储的基本概念：&#xA;1.存储区域网络(SAN)：是一种专用的高速网络，用于在数据存储设备（如磁盘阵列、磁带库等）与电脑服务器之间传输数据。&#xA;2.iSCSI (Internet Small Computer Systems Interface)：是实现存储区域网络（SAN）连接的一种网络协议技术，是一种基于IP网络的存储网络协议，允许客户端（发起端）通过TCP/IP网络（如以太网）访问存储设备（目标端）。&#xA;3.Fibre Channel（光纤通道）：也是实现存储区域网络（SAN）连接的一种高速网络协议技术，专为存储网络设计，提供高带宽和低延迟的数据传输。&#xA;4.SAN Manager：群晖的SAN Manager是可以轻松管理和监控iSCSI和Fibre Channel服务的一个工具。 iSCSI和Fibre Channel都是存储区域网络 (SAN) 协议提供对整合和块级数据存储的访问。客户端可以像访问本地硬盘一样访问 SAN 上的存储空间。&#xA;5.LUN：LUN是&amp;quot;Logical Unit Number&amp;quot;的缩写，即逻辑单元号，在存储领域,LUN代表了一个独立的、可寻址的存储单元。我们可以把它想象成一个虚拟的硬盘分区，通过SAN Manager，可以创建多个LUN，并将它们分配给不同的电脑服务器分配一个专用的存储空间。&#xA;了解了上面有关存储的基本术语后，我们正式开始进入实操。事前要确保电脑与存储设备之间的网络是连通的。这里演示通过iSCSI网络协议，一步一步教大家把公司或家里的电脑服务器连接上群晖的SAN存储，把群晖存储上的空间当成电脑或服务器的本地硬盘使用。&#xA;首先要记下电脑iSCIS中的IQN名称：&#xA;在Windows 10 的搜索框中搜索&amp;quot;iscsi&amp;quot;，点开&amp;quot;iSCSI程序&amp;quot;&#xA;如果是windows server版本的系统，则在“服务器管理器”的“工具”菜单下打开&amp;quot;iSCSI程序&amp;quot;&#xA;打开&amp;quot;iSCSI程序&amp;quot;后，点击“配置”选项卡，复制记下“发起程序名称”，这是主机iSCIS的IQN名称，后面的操作会用到。&#xA;IQN（iSCSI Qualified Name）是用于唯一标识iSCSI节点（如存储设备或电脑发起器）的名称&#xA;然后进入群晖存储的后台管理主页面，点击[套件中心]，找到[SAN Manager]&#xA;这是SAN Manager的主界面&#xA;点击左边导航栏的 [LUN] ，[新增]一个LUN&#xA;填写LUN存储空间的容量大小，这个就是后面挂载到电脑上的磁盘空间&#xA;这里按默认选择协议&#xA;到这一步就需要[添加新主机]，意思是要把上面的&amp;quot;LUN&amp;quot;连接到哪一台电脑或服务器上。&#xA;这里先[添加启动器]，并选择好主机的操作系统类型&#xA;添加主机的IQN号，把上面准备好的IQN名称填写进来&#xA;给予主机对LUN的读写权限&#xA;完成LUN的创建&#xA;已经创建好的LUN的状态&#xA;如果需要再新增多一台主机，可以点击“新增”按钮，继续重复上面的步骤添加主机。&#xA;注意：同一个LUN，只能给一台主机读和写的权限，其它主机只能给只读权限。&#xA;另外，如果目标计划用作集群感知存储（如VMFS，OCFS等）且需要连接到多台主机，请启用允许多个会话。否则，iSCSI Target一次只能连接到一台主机。&#xA;群晖存储的LUN创建好后，把电脑或服务器连接上群晖存储并挂载LUN，步骤如下：&#xA;打开iSCSI程序，点击“目标”选项卡，填写连接的目标(即存储设备的ip地址)，这里填写群晖存储的ip，点击“快速连接”，连接的成功后，会在“已发现的目标”下添加一条记录，并显示“已连接”的状态。&#xA;电脑的iSCSI程序成功连接好存储的LUN后，打开电脑的“磁盘管理器”，在“磁盘管理器”中就能看到一个新磁盘了，如果没看到，可点击“操作”菜单下的“重新扫描磁盘”。这里看到的这个新磁盘，实际上就是上面群晖存储上创建的那个LUN。&#xA;把新磁盘进行“联机”操作，并初始化新磁盘&#xA;最后把新磁盘进行分区并格式化，就可以正常使用了，跟电脑上的本地磁盘一样。</description>
    </item>
    <item>
      <title>技术备忘--infortrend存储设备篇(随更)</title>
      <link>https://freefish100.github.io/hugoblog-all/posts/jsbw202410b/</link>
      <pubDate>Wed, 10 Jul 2024 00:00:00 +0000</pubDate>
      <guid>https://freefish100.github.io/hugoblog-all/posts/jsbw202410b/</guid>
      <description>Infortrend普安存储设备 目前的型号，支持单只硬盘的最大容量是18T。（此条目更新于2022年7月） 存储中的硬盘使用raid10生成逻辑卷后，会自动创建两个raid1的逻辑磁盘，这是正常的。&#xA;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.. DS系列：物理硬盘&amp;ndash;&amp;gt;逻辑卷&amp;ndash;&amp;gt;逻辑磁盘&amp;ndash;&amp;gt;分区。（服务器主机映射分区，最终使用的是分区）&#xA;iSCSI映射步骤：&#xA;1、存储主页&amp;ndash;&amp;gt;设置通道的ip地址，比如192.168.1.10&#xA;2、服务器主机打开ISCSI程序&amp;ndash;&amp;gt;“目标”&amp;ndash;&amp;gt;填写目标ip地址(即上面通道的ip地址)&amp;ndash;&amp;gt;点击&amp;quot;快速连接&amp;quot;。连接成功后，会在&amp;quot;存储主页&amp;quot;&amp;ndash;&amp;gt;&amp;ldquo;通道&amp;rdquo;&amp;ndash;&amp;gt;点击&amp;quot;扫描端口信息&amp;quot;&amp;ndash;&amp;gt;&amp;ldquo;添加&amp;quot;页面，可看到服务器主机的 IQN号。&#xA;3、&amp;ldquo;存储主页&amp;rdquo;&amp;ndash;&amp;gt;&amp;ldquo;分区&amp;rdquo;(下面的具体分区)&amp;ndash;&amp;gt;&amp;ldquo;主机 LUN 映射&amp;rdquo;&amp;ndash;&amp;gt;&amp;ldquo;创建&amp;rdquo;&amp;ndash;&amp;gt;&amp;ldquo;自定义主机 LUN 映射配置&amp;rdquo;，插槽、通道号和ID号根据实际接入情况对应选择，然后勾选&amp;quot;使用扩展的主机 LUN 功能&amp;rdquo;，&amp;ldquo;配置iSCSI启动程序别名&amp;rdquo;&amp;ndash;&amp;gt;&amp;ldquo;添加&amp;quot;服务器主机IQN。&#xA;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.. GS系列：物理硬盘&amp;gt;存储池&amp;gt;卷，（服务器主机映射卷，最终使用的是卷）。DS系列：物理硬盘&amp;gt;逻辑卷&amp;gt;逻辑磁盘&amp;gt;分区，（服务器主机映射分区，最终使用的是分区）&#xA;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.. GS系列的卷打开ACL权限控制功能和使用“文件管理器”创建共享文件夹：&#xA;1、设置控制器通道的IP地址：[设置]&amp;ndash;[访问]，设置相应“通道”(例如通道0)的IP地址。要注意，如果是双控制器的机型，要留意设置的是控制器A还是控制器B，最好两个控制器都设置通道的IP地址，物理线缆也要连接到相应的控制器所对应的通道端口。&#xA;2、新建一个存储池：[设置]&amp;ndash;[存储配置]&amp;ndash;[存储池]&amp;ndash;[添加存储池]，其中“为该存储器指定一个控制器”下，要留意是把池建立在A控制器还是B控制器，如果是A控制器就是用A控制器所对应的IP地址来访问共享文件夹，若是把池建立在B控制器，就用B控制器所对应的IP地址来访问共享文件夹。&#xA;3、创建一个卷：[设置]&amp;ndash;[存储配置]&amp;ndash;[添加卷]，卷所属的“存储池”，选择刚才建立的存储池，卷的类型选择“NAS文件级卷”，勾选“启用高级ACL”。&#xA;4、新建一个共享文件夹(如果不先建立一个共享文件夹，当访问“文件管理器”时会提示“没有可访问的共享文件夹”)：[设置]&amp;ndash;[权限]&amp;ndash;[共享文件夹]&amp;ndash;[添加]，其中“协议访问”那，要勾选“CIFS/SMB”，在当前页面中切换到“权限”选项卡，给予用户相应的访问权限。 5、访问文件管理器：[设置]&amp;ndash;[应用]&amp;ndash;[文件管理器]&amp;ndash;[开启]文件管理器功能，点击下面的“文件管理器”按钮。如果是双控制器的会显示“控制器A文件管理器”和“控制器B文件管理器”，当步骤1中的池是建立在A控制器的，就点击“控制器A文件管理器”，若是池建立在B控制器的，就点击“控制器B文件管理器”，来打开“文件管理器”页面。 6、进入“文件管理器”后，右键点击刚才建立的文件夹，选择“共享”，勾选“CIFS/SMB”。&#xA;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.. 电脑连接存储com口使用的波特率为38400. 有些老款的机器波特率为115200。 GS系列的系统关机顺序：先关闭存储中正在跑的业务(比如虚拟机、数据库等)，然后关闭存储本身的系统(设置&amp;gt;系统&amp;gt;关闭系统)，再关闭电源，如果有扩展柜的，再关闭扩展柜。开机顺序：先开扩展柜（如有），再开存储。 DS系列的关机顺序：管理首页&amp;gt;系统设置&amp;gt;系统&amp;gt;关闭控制器，然后关闭电源。 GS系列添加热备盘：插入新硬盘，设备&amp;gt;存储设备&amp;gt;硬盘，选中新硬盘(硬盘的状态显示为&amp;quot;新硬盘&amp;quot;的，才能添加为热备盘)，点“管理备用硬盘”，按实际需要选择热备盘的类型，比如“全局”或者“本地”。 GS系列加入域：[设置]&amp;ndash;[访问]&amp;ndash;[通道&amp;amp;网络]&amp;ndash;[DNS服务器]&amp;ndash;[添加DNS服务器]，填入DNS服务器IP地址(例如是域服务器的IP地址)，这里最好只填写一个DNS地址，填写多个可能会导致后面“检查域”时出错。然后返回[设置]&amp;ndash;[权限]&amp;ndash;[AD/LDAP]，选择“Windows Active Directory (AD)域”，填写AD服务器的域名，登录域的用户名和密码，其它选项默认，然后点击“检查域”，检查的选项都显示通过后，再点击“保存”。 Linux挂载 iscsi协议 SAN存储：&#xA;1、在存储中做好映射到服务器的操作 (查看服务器主机的iqn号命令：cat /etc/iscsi/initiatorname.iscsi) 2、发现存储： iscsiadm -m discovery -p 192.168.1.51 -t st 其中 192.168.1.51是存储通道的IP。 命令执行后会返回存储通道对应的IP、端口号，以及服务器主机的iqn号 3、连接存储：iscsiadm -m node -T iqn.1994-05.com.redhat:34b1b4c5b2f3 -p 192.168.1.51 -l 其中 192.168.1.51是存储通道的IP，“ iqn.1994-05.com.redhat:34b1b4c5b2f3”是服务器主机的iqn号。如成功连接，会回显successful字样 Linux连接FC SAN存储：&#xA;1、服务器主机插上FC HBA卡后，会自动有WWN号和FC光模块端口(SCSI host端口)，把存储中卷LUN映射到服务器对应的WWN。存储注意要选择FC的通道。&#xA;(使用ls /sys/class/fc_host 命令列出相应的FC光模块端口，比如是host15,host16) 。</description>
    </item>
    <item>
      <title>实践 windows server 服务器通过iSCSI方式 连接 浪潮AS2200G2 存储卷</title>
      <link>https://freefish100.github.io/hugoblog-all/posts/20240426/</link>
      <pubDate>Fri, 26 Apr 2024 08:44:50 +0100</pubDate>
      <guid>https://freefish100.github.io/hugoblog-all/posts/20240426/</guid>
      <description>浪潮 G2 系列的存储产品，默认的管理ip为 192.168.70.10，登录用户名和密码为 superuser / Passw0rd! ，电脑浏览器访问G2存储管理的ip，即可打开存储的登录页面&#xA;登录后，看到首页是G2存储的总览状态&#xA;当前已建立了一个存储池和一个存储卷&#xA;这里讲述一下建立一个卷和把卷映射到主机的基本操作：&#xA;1、点击页面左边导航条的第3个图标，再点击“创建卷”&#xA;这里新建一个“基本”卷&#xA;2、点击页面左边导航条的第4个图标，再点击“添加主机”&#xA;填写主机的名称和iSCS端口(主机的iqn)。名称这里可自定义，iSCS端口要填写主机的IQN名称&#xA;按如下步骤可以查找到主机的IQN：打开windows server的“开始菜单”&amp;ndash;“Windows管理工具”&amp;ndash;&amp;ldquo;iSCSI发起程序&amp;rdquo;&#xA;切换到&amp;quot;配置”选项卡，即可看到主机的IQN名称，把IQN复制粘贴到上面第2个步骤的“iSCS端口”里&#xA;3、把卷映射到主机&#xA;选择要映射到的主机，这里选择上面刚刚添加的那台主机&#xA;4、查看存储设备的ip地址，以太网端口的ip，这台G2是双控制器的机型，每个控制器有4个端口。当前这里就配置了每个控制器的1和2端口的ip，主机通过交换机与存储设备控制器的端口都已连通&#xA;5、再次打开&amp;quot;iSCSI发起程序&amp;quot;，切换到“目标”选项卡，在“目标”中填写上图中的控制器以太网端口的ip，如192.168.67.130 ，然后点击“快速连接”&#xA;成功连接到目标存储的状态。双控制器的多个端口ip的，重复第5个步骤，把所有的目标ip都连接上&#xA;当&amp;quot;iSCSI发起程序&amp;quot;连接目标存储成功后，存储端就会看到主机处于“联机”状态&#xA;6、安装多路径功能。这台G2存储，是双控多端口链路的，主机还需要安装“多路径”服务，以防止某单条链路故障导致业务中断&#xA;安装好MPIO多路径功能后，重启一次主机，然后打开MPIO属性设置&#xA;点击“发现多路径”选项卡，对相应的设备勾选上“添加对iSCSI设备的支持”&#xA;7、打开“磁盘管理器”，点击“操作”菜单&amp;ndash;“重新扫描磁盘”，就可以见到一块新添加的磁盘了，右击这块新磁盘选择“联机”，然后再次右击新磁盘选择“初始化”，然后对新磁盘进行分区，就可以使用了。&#xA;这样就把G2存储上的一个卷，连接并挂载到windows server 的主机上，当成本地磁盘使用了。</description>
    </item>
    <item>
      <title>Infortrend普安GS系列存储文件同步，两台存储间文件同步</title>
      <link>https://freefish100.github.io/hugoblog-all/posts/js20220904b/</link>
      <pubDate>Sun, 04 Sep 2022 00:00:00 +0000</pubDate>
      <guid>https://freefish100.github.io/hugoblog-all/posts/js20220904b/</guid>
      <description>RSYNC: remote synchronize 的缩写，是一个远程数据同步工具，可以通过网络实现多台主机之间的文件同步，也可以实现同一主机上不同分区或目录间的数据同步。Rsync 通过“quick check”算法，仅同步发生变化的文件或目录，甚至是只同步一个文件中发生变化的内容部分。因此相比于 cp、scp 等完整拷贝工具，rsync 的增量拷贝在性能和效率上更胜一筹。&#xA;Rsync 特性：&#xA;可以镜像保存整个目录树和文件系统 同步时可以选择是否保持源文件或目录的权限、时间、软硬链接等属性不改变 增量同步，效率更高 灵活的传输方式，可以使用 rsh,ssh 或直接 socket 连接 支持匿名传输 无论是本地还是远程同步数据，首次运行时将会把全部数据拷贝一次，以后再同步时才会是增量备份。由于 rsync 数据复制时效能不如 cp,tar 等工具速度快，因此如果在数据量比较大的情况下，首次复制可以先用其它工具完成，之后再用 rsync 实现同步。&#xA;GS 系列 rsync 网络服务介绍 IFT 所有统一存储，如：GS、GSe、GSc、GSa、GSi、GSe Pro 系列均可以作为 rsync 源端或 rsync 目标端或既是源端也是目标端。当使用 GS 作为 rsync 源端时，直接从“排程&amp;amp;备份”中创建一个文件夹远程同步计划即可；当使用 GS 作为 rsync 目标端时，由两种方式可选择，第一种方式是通过 ssh 直接访问；第二种方式是通过 socket 方式，这种方式需要先在“访问”-“网络服务”中开启并配置 rsync 目标服务，具体操作在以下章节中详细介绍。由于 rsync 协议本身是开源软件，所以此功能在 GS 中也是完全免费的，不需要额外购买 License。&#xA;两台 GS 之间 rsync 同步数据可以选择使用 ssh 方式或 socket 方式来实现，本文以SSH方式为例，演示两台GS 之间 rsync 同步数据，其中GS1016为源端，GS1012为目标端。</description>
    </item>
  </channel>
</rss>
